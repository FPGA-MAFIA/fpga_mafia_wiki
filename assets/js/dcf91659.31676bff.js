"use strict";(self.webpackChunkmy_docs=self.webpackChunkmy_docs||[]).push([[6609],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),_=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=_(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=_(n),p=r,m=u["".concat(s,".").concat(p)]||u[p]||d[p]||l;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=p;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[u]="string"==typeof e?e:r,i[1]=o;for(var _=2;_<l;_++)i[_]=n[_];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},2440:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>_});var a=n(7462),r=(n(7294),n(3905));const l={},i="Dedicated Test Intro",o={unversionedId:"cache/Verif/Dedicated_test",id:"cache/Verif/Dedicated_test",title:"Dedicated Test Intro",description:"We conduct a series of  tests in our test bench to validate specific features and verify various cases that the cache might encounter during operation.",source:"@site/docs/cache/Verif/Dedicated_test.md",sourceDirName:"cache/Verif",slug:"/cache/Verif/Dedicated_test",permalink:"/fpga_mafia_wiki/docs/cache/Verif/Dedicated_test",draft:!1,editUrl:"https://github.com/FPGA-MAFIA/fpga_mafia_wiki/tree/main/docs/cache/Verif/Dedicated_test.md",tags:[],version:"current",frontMatter:{},sidebar:"Cache",previous:{title:"Post Process and trackers",permalink:"/fpga_mafia_wiki/docs/cache/Verif/post_proccess"},next:{title:"Random_and_stress",permalink:"/fpga_mafia_wiki/docs/cache/Verif/Random_and_stress"}},s={},_=[],c={toc:_},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"dedicated-test-intro"},"Dedicated Test Intro"),(0,r.kt)("p",null,"We conduct a series of  tests in our test bench to validate specific features and verify various cases that the cache might encounter during operation."),(0,r.kt)("p",null,"The diverse test suite covers scenarios such as back to back writes or reads requests to the same CL to check for data error or ensuring that fill requests are not sent unnecessarily.\nWe simulate scenarios with loaded data to emulate cache hits, verifying that the cache responds correctly to expected hits and that any misses are flagged."),(0,r.kt)("p",null,"Then we started to create random tests to evaluate the behavior of the cache or memory subsystem by randomly generating read and write requests. The goal is to explore extreme cases and identify potential bugs that may not be uncovered in deterministic test scenarios.\nOur test will be composed of three key tasks"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"create_addrs_pull"),":\nGenerates a diverse set of tag and set combinations."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-systemverilog"},"task create_addrs_pull(input int local_num_tag_pull = V_MAX_NUM_TAG_PULL, // default values\n                       input int local_num_set_pull = V_MAX_NUM_SET_PULL, // default values\n                       output logic [7:0] tag_pull [V_MAX_NUM_TAG_PULL:0],\n                       output logic [7:0] set_pull [V_MAX_NUM_SET_PULL:0]);\n    int i;\n    for (i = 0; i < local_num_tag_pull+1; i = i + 1) begin\n        tag_pull[i] = $urandom_range(8'h00, 8'hFF);\n    end\n    for (i = 0; i < local_num_set_pull+1; i = i + 1) begin\n        set_pull[i] = $urandom_range(8'h00, 8'hFF);\n    end\nendtask\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"random_wr / random_rd:")," Generates random write/read requests to stress-test the system."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-systemverilog"},"task random_wr(input int local_min_req_delay = V_MIN_REQ_DELAY, // default values\n               input int local_max_req_delay = V_MAX_REQ_DELAY, // default values\n               input int local_num_tag_pull  = V_NUM_TAG_PULL, // default values\n               input int local_num_set_pull  = V_NUM_SET_PULL  // default values\n              ); \n    logic [19:0] addr;\n    logic [31:0] data;\n    logic [4:0]  id;\n    int i;\n    create_addrs(.local_num_tag_pull(local_num_tag_pull), \n                 .local_num_set_pull(local_num_set_pull), \n                 .addr(addr)\n                 );\n    data = $urandom_range(0, 32'hFFFFFFFF);\n    id = $urandom_range(0, 5'd31);\n    wr_req(addr, data, id);\n    i = $urandom_range(local_min_req_delay, local_max_req_delay);\n    delay(i);\nendtask\n\n//=======================================================\n//=======================================================\ntask random_rd(\n                input int local_min_req_delay = V_MIN_REQ_DELAY, // default values\n                input int local_max_req_delay = V_MAX_REQ_DELAY, // default values\n                input int local_num_tag_pull  = V_NUM_TAG_PULL, // default values\n                input int local_num_set_pull  = V_NUM_SET_PULL  // default values\n              ); \n    logic [19:0] addr;\n    logic [4:0]  id;\n    int i;\n    create_addrs(.local_num_tag_pull(local_num_tag_pull), \n                 .local_num_set_pull(local_num_set_pull), \n                 .addr(addr)\n                 );\n    id = $urandom_range(0, 5'd31);\n    rd_req(addr, id);\n    i = $urandom_range(local_min_req_delay, local_max_req_delay);\n    delay(i);\nendtask\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Exemple of usage")),(0,r.kt)("p",null,"In this test, a total of 50 random read and write requests are sent to the design.\nBack-to-back requests and a mix of read and write operations are included to simulate real-world usage scenarios.\nThe script aims to stress-test the design by introducing random delays and varying request types to uncover any corner cases or unexpected behavior."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-systemverilog"},"LOCAL_NUM_TAG_PULL = 10;\nLOCAL_NUM_SET_PULL = 1;\ncreate_addrs_pull(.local_num_tag_pull(LOCAL_NUM_TAG_PULL),//input\n                  .local_num_set_pull(LOCAL_NUM_SET_PULL),//input\n                  .tag_pull(tag_pull),  //output\n                  .set_pull(set_pull)   //output\n                  );\n\n// send 50 rd/wr request according to the RD_RATIO parameter\nfor(int i = 0; i<50; i++) begin\n    if(V_RD_RATIO > $urandom_range(0, 100)) begin\n        random_rd(.local_min_req_delay(15), //input\n                  .local_max_req_delay(16), //input\n                  .local_num_tag_pull(LOCAL_NUM_TAG_PULL),   //input\n                  .local_num_set_pull(LOCAL_NUM_SET_PULL)    //input\n                  );\n    end else begin\n        random_wr(.local_min_req_delay(15),  //input\n                  .local_max_req_delay(16),  //input\n                  .local_num_tag_pull(LOCAL_NUM_TAG_PULL),    //input\n                  .local_num_set_pull(LOCAL_NUM_SET_PULL)     //input\n                  );\n    end\nend\n\n")))}d.isMDXComponent=!0}}]);