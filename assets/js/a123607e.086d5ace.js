"use strict";(self.webpackChunkmy_docs=self.webpackChunkmy_docs||[]).push([[8021],{3905:(t,e,a)=>{a.d(e,{Zo:()=>u,kt:()=>h});var n=a(7294);function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){r(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e){if(null==t)return{};var a,n,r=function(t,e){if(null==t)return{};var a,n,r={},i=Object.keys(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||(r[a]=t[a]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}var s=n.createContext({}),d=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):l(l({},e),t)),a},u=function(t){var e=d(t.components);return n.createElement(s.Provider,{value:e},t.children)},c="mdxType",p={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},m=n.forwardRef((function(t,e){var a=t.components,r=t.mdxType,i=t.originalType,s=t.parentName,u=o(t,["components","mdxType","originalType","parentName"]),c=d(a),m=r,h=c["".concat(s,".").concat(m)]||c[m]||p[m]||i;return a?n.createElement(h,l(l({ref:e},u),{},{components:a})):n.createElement(h,l({ref:e},u))}));function h(t,e){var a=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var i=a.length,l=new Array(i);l[0]=m;var o={};for(var s in e)hasOwnProperty.call(e,s)&&(o[s]=e[s]);o.originalType=t,o[c]="string"==typeof t?t:r,l[1]=o;for(var d=2;d<i;d++)l[d]=a[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},666:(t,e,a)=>{a.r(e),a.d(e,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const i={},l="Router MAS",o={unversionedId:"fabric/MAS_router/mas_router",id:"fabric/MAS_router/mas_router",title:"Router MAS",description:"Brief Description:",source:"@site/docs/fabric/MAS_router/mas_router.md",sourceDirName:"fabric/MAS_router",slug:"/fabric/MAS_router/",permalink:"/fpga_mafia_wiki/docs/fabric/MAS_router/",draft:!1,editUrl:"https://github.com/FPGA-MAFIA/fpga_mafia_wiki/tree/main/docs/fabric/MAS_router/mas_router.md",tags:[],version:"current",frontMatter:{},sidebar:"Fabric",previous:{title:"Router Intro",permalink:"/fpga_mafia_wiki/docs/fabric/MAS_router/mas_intro"},next:{title:"Next_tile_fifo_arb MAS",permalink:"/fpga_mafia_wiki/docs/fabric/MAS_router/mas_next_tile_fifo_arb"}},s={},d=[{value:"Common Signals:",id:"common-signals",level:2},{value:"North Interface:",id:"north-interface",level:2},{value:"East Interface:",id:"east-interface",level:2},{value:"West Interface:",id:"west-interface",level:2},{value:"South Interface:",id:"south-interface",level:2},{value:"Local Interface:",id:"local-interface",level:2},{value:"Head-of-Line Blocking (HOL):",id:"head-of-line-blocking-hol",level:3},{value:"Impact of HOL:",id:"impact-of-hol",level:3}],u={toc:d},c="wrapper";function p(t){let{components:e,...i}=t;return(0,r.kt)(c,(0,n.Z)({},u,i,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"router-mas"},"Router MAS"),(0,r.kt)("h1",{id:"1-overview"},"1. Overview"),(0,r.kt)("p",null,"Brief Description:\nThis document outlines the micro-architecture of the router module, which is designed to route and arbitrate requests between different directions (North, East, West, South, Local) in a tile-based system. It handles request validity, transaction details, and arbitration for data exchange."),(0,r.kt)("p",null,"Purpose and Functionality:\nThe router module is responsible for routing and arbitrating data requests between various directions based on input validity and arbitration logic. It ensures efficient communication between tiles within the system."),(0,r.kt)("h1",{id:"2-block-diagram"},"2. Block Diagram"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"router",src:a(5798).Z,width:"1024",height:"954"})),(0,r.kt)("h1",{id:"3-interfaces"},"3. Interfaces"),(0,r.kt)("p",null,"Signal tables:"),(0,r.kt)("h2",{id:"common-signals"},"Common Signals:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Signal Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Direction"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"clk"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Clock signal.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"rst"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Reset signal.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"local_tile_id"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"The ID of the current tile.")))),(0,r.kt)("h2",{id:"north-interface"},"North Interface:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Signal Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Direction"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_north_req_valid"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Signal indicating the validity of requests from the North direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_north_req"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Transaction details for requests from the North direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_north_ready"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Ready signal indicating the availability for data exchange from the North direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_north_ready"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Ready signal indicating the availability for data exchange to the North direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_north_req_valid"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Signal indicating the validity of requests forwarded to the North direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_north_req"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Transaction details for requests forwarded to the North direction.")))),(0,r.kt)("h2",{id:"east-interface"},"East Interface:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Signal Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Direction"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_east_req_valid"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Signal indicating the validity of requests from the East direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_east_req"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Transaction details for requests from the East direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_east_ready"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Ready signal indicating the availability for data exchange from the East direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_east_ready"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Ready signal indicating the availability for data exchange to the East direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_east_req_valid"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Signal indicating the validity of requests forwarded to the East direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_east_req"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Transaction details for requests forwarded to the East direction.")))),(0,r.kt)("h2",{id:"west-interface"},"West Interface:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Signal Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Direction"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_west_req_valid"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Signal indicating the validity of requests from the West direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_west_req"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Transaction details for requests from the West direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_west_ready"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Ready signal indicating the availability for data exchange from the West direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_west_ready"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Ready signal indicating the availability for data exchange to the West direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_west_req_valid"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Signal indicating the validity of requests forwarded to the West direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_west_req"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Transaction details for requests forwarded to the West direction.")))),(0,r.kt)("h2",{id:"south-interface"},"South Interface:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Signal Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Direction"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_south_req_valid"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Signal indicating the validity of requests from the South direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_south_req"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Transaction details for requests from the South direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_south_ready"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Ready signal indicating the availability for data exchange from the South direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_south_ready"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Ready signal indicating the availability for data exchange to the South direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_south_req_valid"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Signal indicating the validity of requests forwarded to the South direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_south_req"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Transaction details for requests forwarded to the South direction.")))),(0,r.kt)("h2",{id:"local-interface"},"Local Interface:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Signal Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Direction"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_local_req_valid"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Signal indicating the validity of requests from the Local direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_local_req"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Transaction details for requests from the Local direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"in_local_ready"),(0,r.kt)("td",{parentName:"tr",align:null},"Input"),(0,r.kt)("td",{parentName:"tr",align:null},"Ready signal indicating the availability for data exchange from the Local direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_local_ready"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Ready signal indicating the availability for data exchange to the Local direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_local_req_valid"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Signal indicating the validity of requests forwarded to the Local direction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"out_local_req"),(0,r.kt)("td",{parentName:"tr",align:null},"Output"),(0,r.kt)("td",{parentName:"tr",align:null},"Transaction details for requests forwarded to the Local direction.")))),(0,r.kt)("h1",{id:"4-functional-description"},"4. Functional Description"),(0,r.kt)("p",null,"Operational Modes:"),(0,r.kt)("p",null,"The router module operates in various modes depending on the input validity signals and arbitration logic. It routes and forwards requests between different directions while ensuring data integrity."),(0,r.kt)("p",null,"Data Flow Description:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"The module receives requests from various directions, each with its associated validity signal, transaction details, and ready signal."),(0,r.kt)("li",{parentName:"ol"},"It performs arbitration to determine the priority of requests from different directions."),(0,r.kt)("li",{parentName:"ol"},"The selected request is then forwarded to the appropriate output direction."),(0,r.kt)("li",{parentName:"ol"},"Ready signals are asserted to indicate the availability for data exchange in the selected direction.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"One of the main issues that we had was the HOL(head of line) problem, first lets explain the issue.")),(0,r.kt)("h3",{id:"head-of-line-blocking-hol"},"Head-of-Line Blocking (HOL):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"HOL blocking happens when a packet at the head of a queue in a router or switch prevents other packets behind it from being forwarded, even if those subsequent packets are destined for different output ports."),(0,r.kt)("li",{parentName:"ul"},"Essentially, the presence of a single stalled or delayed packet can cause congestion and block the transmission of all other packets in the same queue, leading to inefficient use of network resources."),(0,r.kt)("li",{parentName:"ul"},"This situation arises because packet switching devices typically process packets in a first-in-first-out (FIFO) manner, where packets are forwarded in the order they arrive. If a packet at the front of the queue encounters a delay (e.g., due to processing or waiting for an available output port), all subsequent packets in the same queue are also delayed, regardless of their priority or urgency.")),(0,r.kt)("h3",{id:"impact-of-hol"},"Impact of HOL:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"HOL blocking can significantly degrade network performance by increasing packet latency, reducing throughput, and causing jitter."),(0,r.kt)("li",{parentName:"ul"},"In worst-case scenarios, HOL blocking can lead to packet loss and network congestion, especially in high-traffic environments."),(0,r.kt)("li",{parentName:"ul"},"It becomes more pronounced in networks with bursty traffic patterns or when there are disparities in the arrival rates of packets destined for different output ports.")),(0,r.kt)("p",null,"In our design, HOL blocking can occur if we naively insert only one fifo_arb for each router (to save space), with the output connected to other tiles. In this setup, if there is a transaction destined for the north, and behind it, there is a transaction bound for the south, the south transaction gets blocked by the north transaction. In other words, if the north tile is not ready, all other transactions will be stuck behind it."),(0,r.kt)("p",null,"The router module that addresses the HOL blocking problem by efficiently managing the allocation of communication resources among multiple incoming requests. Here's how the router module achieves this:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Input Buffering"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Incoming communication requests from neighboring tiles are first buffered in FIFO buffers within the ",(0,r.kt)("inlineCode",{parentName:"li"},"fifo_arb")," module. Each FIFO buffer corresponds to a particular communication channel or direction, more info on the ",(0,r.kt)("a",{parentName:"li",href:"/fpga_mafia_wiki/docs/fabric/MAS_router/mas_fifo_arb"},"mas_fifo_arb tab")))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Arbitration"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"fifo_arb")," module uses the ",(0,r.kt)("inlineCode",{parentName:"li"},"arbiter")," module to arbitrate among the buffered requests. The ",(0,r.kt)("inlineCode",{parentName:"li"},"arbiter")," ensures fair access to the communication resources by selecting one request at a time based on a round-robin scheduling policy."),(0,r.kt)("li",{parentName:"ul"},"The arbitration process ensures that no single communication request monopolizes the communication resources, preventing HOL blocking by allowing all requests to be serviced in a fair and timely manner."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Dynamic Selection"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"arbiter")," module dynamically selects the next valid request from the buffered requests, considering factors such as whether the FIFO buffer has data and whether the corresponding arbiter is ready to accept data."),(0,r.kt)("li",{parentName:"ul"},"This dynamic selection ensures that if one FIFO buffer becomes empty or is not ready to accept data, the arbiter can quickly select another valid request from the remaining buffered requests."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Optimized Routing"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Once a request is selected by the ",(0,r.kt)("inlineCode",{parentName:"li"},"arbiter"),", the ",(0,r.kt)("inlineCode",{parentName:"li"},"fifo_arb")," module routes the corresponding data packet to the appropriate output port or neighboring tile."),(0,r.kt)("li",{parentName:"ul"},"By efficiently managing the routing of data packets based on the selected requests, the router module optimizes the usage of communication resources and minimizes the chances of HOL blocking."))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Continuous Operation"),":"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The router module operates continuously, buffering incoming requests, arbitrating among them, and routing data packets based on the arbitration results."),(0,r.kt)("li",{parentName:"ul"},"This continuous operation ensures that communication resources are utilized effectively and that incoming requests are processed without delays or bottlenecks caused by HOL blocking.")))),(0,r.kt)("p",null,"In summary, the router module utilizing the ",(0,r.kt)("inlineCode",{parentName:"p"},"fifo_arb")," module, which incorporates the ",(0,r.kt)("inlineCode",{parentName:"p"},"arbiter")," module, solves the HOL blocking problem by efficiently managing communication resources, ensuring fair access to these resources, and dynamically selecting and routing data packets based on incoming requests."),(0,r.kt)("p",null,"Waveform example:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"router",src:a(7990).Z,width:"1600",height:"573"})),(0,r.kt)("p",null,"In this waveform, we can observe the routing process in action. The router receives a request from the north, as indicated by the 'in_north_req' signal. After evaluating the request and determining the appropriate routing path, the router decides to forward this request westward. This decision is reflected in the 'out_west_req' signal, which becomes active, signifying that the request is being sent in the west direction. Additionally, we can see that the 'valid' and 'ready' signals are asserted correctly, ensuring a smooth and efficient data exchange between the different interfaces of the router. This example demonstrates the router's ability to dynamically route requests based on their destination, while managing the flow control signals to maintain data integrity and prevent congestion."),(0,r.kt)("h1",{id:"5-tests-and-verification"},"5. Tests and verification"),(0,r.kt)("p",null,"Since one of the main issues was the occurrence of HOL, we needed to test it directly to provoke HOL and then verify its resolution. Therefore, we devised a Back Pressure (BP) test. This test fills all the FIFOs in the router and prevents any transactions from being released. At a certain point, after all the FIFOs are full, we release the blocking and allow the data to flow. Subsequently, we expect to observe that all the transactions that managed to enter the FIFOs are processed. Additionally, we aim to ensure that the router does not accept any new transactions while it is full, thus preventing any transactions from disappearing."))}p.isMDXComponent=!0},5798:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/router-d5a213e97294baa03340316a5b1530ec.jpg"},7990:(t,e,a)=>{a.d(e,{Z:()=>n});const n=a.p+"assets/images/router_tile_33-56e69f261eb4741aff4f30df7f63e05c.jpg"}}]);